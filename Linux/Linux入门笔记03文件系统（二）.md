# 磁盘的分区、格式化、检验和挂载

## 格式化

格式化也称建造文件系统（make filesystem)。命令为mkfs，若要建立xfs，则命令为`mkfs.xfs`

## 文件系统的挂载和卸除

### 挂载的含义：

将文件系统与目录树连接的动作称为挂载。被挂载的一定是目录，该目录则作为文件系统的入口

注意：

1. 单一文件系统不应挂载多个目录
2. 单一目录不应该被挂载多个文件系统
3. 被挂载的目录理论上应该为空目录

准对第三点，所目录不为空，且该目录被新的文件系统挂载，则原目录的内容会暂时的隐藏（并没有被抹去），直到卸载该文件之后，才会恢复

### 挂载命令：mount

![image-20200604203812287](.\Linux入门笔记 03文件系统（二）.assets\image-20200604203812287.png)

## 卸除文件系统

## 命令：unmount

![image-20200604204332686](.\Linux入门笔记 03文件系统（二）.assets\image-20200604204332686.png)

## 指定开机挂载`/etc/fstab`和`/etc/mtab`

在`/etc/fstab`中修改开机自动的挂载

![image-20200605082703068](.\Linux入门笔记 03文件系统（二）.assets\image-20200605082703068.png)

fstab(file system table)

## XFS系统的备份和还原

### XFS系统备份xfsdump

1. xfsdump分为完整备份和累计备份，第一次备份时为完整备份，之后的再需要备份时，系统会根据差异进行累计备份

   ![image-20200605110920034](.\Linux入门笔记 03文件系统（二）.assets\image-20200605110920034.png)

2. xfsdump的一些限制

   1. 只能备份已挂载的
   2. 需要root权限
   3. 备份下来的数据需要xfsrestore解析
   4. xfsdump根据UUID 来分辨备份档

3. xfsdump命令

   ![image-20200605111211949](.\Linux入门笔记 03文件系统（二）.assets\image-20200605111211949.png)

   ![image-20200605111222547](.\Linux入门笔记 03文件系统（二）.assets\image-20200605111222547.png)

4. xfxrestore命令

   ![image-20200605123352957](.\Linux入门笔记 03文件系统（二）.assets\image-20200605123352957.png)

5. 查看xfs备份数据：`xfsdump -I`和`xfsrestore -I`命令作用相同

6. 若只想复原某一个目录或文件的话，加上`[-s 目录]`