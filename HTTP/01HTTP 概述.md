# HTTP 概述

## 媒体类型

因为网络上有数千种不同的数据类型，HTTP给每个需要被传输的对象打上名为MIME type的标签。最初设计MIME（Multipurpose Intent Mail Extension）是解决电子邮件系统间搬移报文时存在的问题。

Web服务器会为传输的文件打上MIME标签，而web浏览器会根据标签来进行处理该对象。大多数浏览器会处理数百种常见的对象类型，例如图片、HTML、音频视频

MIME是一种文本标记，表示一种主要的类型和其一种子类型，中间用斜杠分开。例如：

- HTML格式的文本用text/html	类型来标记
- 普通的文本用text/plain来标记
- JPEG图片用image/jpeg
- GIF图片用image/gif
- APPLE的quicktime电影用video/quicktime
- 微软的PPT用application/vnd.ms-powerpoint

#### URI

每个web服务器的资源都有一个名字，被称为URI统一资源标识符`Uniform Resource Identifier`，URI分为两种，一种是URL一种是URN。

#### URL

统一资源定位符，为资源标识符最常见的形式

大部分URL拥有一种标准的格式：

1. 协议：说明了使用的协议类型，比如http
2. 因特网地址：比如www.googel.com
3. 资源地址：比如/special/1.jpg

#### URN

统一资源名，即无论这个资源在哪个地方，都能URN访问，且还能用同一个名字通过多种访问协议来访问资源。例如

```
urn:ietf:rfc:2141
```

无论这个文件在何处，都可以使用urn来访问。

URN正处于试验阶段，还未大规模使用

#### 事务

HTTP事务由一条请求命令和响应结果组成。

#### 方法

HTTP请求分为不同的方法，以告诉服务器执行什么动作。常见的方法如：

- GET
- POST
- PUT
- HEAD
- DELETE

#### 状态码

同样每条报文的响应报文会携带一个状态码。告诉响应方请求的状况，以及是否采取其他操作。

#### WEB页面可以包含多个对象

通常完成一个应用任务需要多个HTTP请求，故可以使用HTML这个框架来将这些资源整合，组装，通常一个WEB页面可以包含多个对象

#### 报文

![image-20200621165602677](E:\homework\Markdown\HTTP\img\image-20200621165602677.png)

通常一个报文分为3段：

1. 起始行
2. 首部
3. 主体

### 传输

HTTP是一个应用层协议，它无需担心一些联网的细节，一切交给了通用、可靠的传输协议TCP/IP

TCP提供了：

- 无差错的数据传输
- 按序传输（数据总会按照发送的顺序到达
- 未分段的数据流（在任意时刻将任意尺寸的数据发送出去

![image-20200621170145709](E:\homework\Markdown\HTTP\img\image-20200621170145709.png)

### HTTP版本

1. HTTP/0.9

   http原型，只支持GET方法，不支持多媒体内容，HTTP首部等

2. HTTP/1.0

   第一个得到广泛应用的版本

3. HTTP/1.0+

   一个非正式的版本，用于应对快速扩张的万维网

4. HTTP/1.1

   当前互联网使用的版本，矫正1.0设计中的缺陷

5. HTTP-NG(HTTP/2.0)

### HTTP结构组件

除了WEB服务器和WEB浏览器，还有一些其他的Web应用程序角色

1. 代理：位于客户端和服务器之间的http中间实体
2. 缓存：http的仓库，使常用的http副本可以存储在离客户端更近的地方
3. 网关：连接其他应用程序的特殊web服务器
4. 隧道：对HTTP通信报文进行盲转发的特殊代理
5. Agent代理：发起自动HTTP请求的半智能web客户端

### 代理

HTTP的代理服务器，这是**web安全、应用集成以及性能优化**的重要组成模块

![image-20200621175417550](E:\homework\Markdown\HTTP\img\image-20200621175417550.png)

用途：在客户端和服务器之间转发流量的代理：

代理会作为转发所有web流量的可信任中间节点使用。还可以对请求和响应进行过滤。

### 缓存

web缓存(Web cache)或代理缓存(proxy cache)是一种特殊的http代理服务器，将常用文档复制保存起来，并为下一个请求同一文档的客户端服务

### 网关

![image-20200621175900020](E:\homework\Markdown\HTTP\img\image-20200621175900020.png)

网关是一种特殊的服务器，作为其他服务器的中间实体使用，通常用于将HTTP流量转换成其他的协议，网关接受请求时就好像自己是组员的源端服务器。客户端也可能并不知道自己正与一个网关进行通信

### 隧道

隧道即在两条连接之间对原始数据进行盲转发的HTTP应用程序。HTTP隧道通常用来在一条或多条HTTP连接上转发非HTTP数据，转发时，不会窥探数据。

![image-20200621180615603](E:\homework\Markdown\HTTP\img\image-20200621180615603.png)

### Agent代理

agent代理是代表用户发起HTTP请求的客户端程序，所有发送web请求的应用程序都是HTTP Agent代理。当然web浏览器也是Agent代理。